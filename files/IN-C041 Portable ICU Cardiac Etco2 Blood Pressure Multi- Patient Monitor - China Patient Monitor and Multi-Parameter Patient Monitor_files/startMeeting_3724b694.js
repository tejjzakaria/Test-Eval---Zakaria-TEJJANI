void function(){var l=function t(){};var o=function t(e,n,i){var o=document.createElement("script");o.type="text/javascript";o.async=o.defer=true;var a=false;var s=function t(){if(o.readyState==="complete"||o.readyState==="loaded"){r.call(o)}};var r=function t(){o.onload=o.onerror=l;if(a){o.detachEvent("onreadystatechange",s)}setTimeout(n,0)};var c=function t(){o.onload=o.onerror=l;setTimeout(i,0)};o.onload=r;o.onerror=c;if(o.readyState&&!o.addEventListener){a=true;o.attachEvent("onreadystatechange",s)}o.src=e;document.body.appendChild(o)};var e=null;var t=function t(){if(e){return e}if(!(this instanceof t)){return new t(arguments)}e=this;this.config={select:".J-start-meeting",urlParam:{getStatus:"//expo.made-in-china.com/live/meeting/getMeetingRoomStatus",getRoom:"//expo.made-in-china.com/live/meeting/getMeetingRooms"},style:'<link href="https://www.micstatic.com/common/js/assets/startMeeting/startMeeting_4dd70baa.css" id="startMeetingStyle" rel="stylesheet" type="text/css" />',lanCode:$("#lanCode").val()||0};t.prototype.startMeetingHtml=function(t){var e='<a href="javascript:void(0);" target="_blank" class="start-meeting auth-icon '+t+'">'+'   <i class="start-meeting-ico"></i>'+'   <span class="start-meeting-text">Start Meeting</span>'+"</a>";return e};t.prototype.checkMeetingBase=function(){return checkMeetingBase(false)};t.prototype.comIds=function(){var t=$(this.config.select).not(".initialized");var e=t.map(function(){return $(this).attr("comid")}).get();return e};t.prototype.getStatus=function(){var t=this;var e=this.comIds();if(e.length){return new Promise(function(n,i){$.ajax({url:t.config.urlParam.getStatus,data:{comIds:t.comIds().join(",")},xhrFields:{withCredentials:true},cache:false,success:function t(e){n(e)},error:function t(e){i(e)}})})}};t.prototype.getRoom=function(t,n,i){var e=this;$.ajax({url:e.config.urlParam.getRoom,data:{comId:t,type:"ontouchstart"in window?2:1},xhrFields:{withCredentials:true},cache:false,success:function t(e){n(e)},error:function t(e){i(e)}})};t.prototype.init=function(t){var r=this;if(t&&t.code==200){t.data.map(function(s){if(s.status){var t=$(r.config.select).filter("[comid='"+s.comId+"']");t.each(function(){var t=$(this);var e=t.attr("theme");var a=t.attr("target");var n=$(r.startMeetingHtml(e));if(!t.hasClass("initialized")){t.addClass("initialized");n.on("click",function(t){t.preventDefault();var i=$(this);var o=null;if(a=="_blank"){o=window.open("about:blank")}if(!i.hasClass("disabled")){i.addClass("disabled");r.getRoom(s.comId,function(t){i.removeClass("disabled");var e=""+'<div class="meeting-supported-toast">'+'<div class="alert-con alert-disappear J-content">'+'<span class="alert-txt J-text"></span>'+"</div>"+"</div>";if(!t.msg){t.msg={201:"The meeting room is unavailable.",202:"Busy now, please try later.",203:"No login"}[t.code];t.msgCn={201:"会客厅无法使用",202:"现在正忙，请稍后再试",203:"没登录"}[t.code];if(t.msg===undefined){t.msg="The meeting room is unavailable.";t.msgCn="会客厅无法使用"}}if(t.code==200||t.code==203){var n=new Image;n.src="//stat.made-in-china.com/event/common.html?t=126";if(a=="_blank"){o.location=t.data.room}else{window.location.href=t.data.room}}else if(t.code==202){o&&o.close();if("ontouchstart"in window){bubble([t.msg,t.msgCn][r.config.lanCode],"error",3e3,{tmpl:e})}else{bubble(i,[t.msg,t.msgCn][r.config.lanCode],"error",3e3,{tmpl:e})}}else{o&&o.close();if([t.msg,t.msgCn][r.config.lanCode]){if("ontouchstart"in window){bubble([t.msg,t.msgCn][r.config.lanCode],"error",3e3,{tmpl:e})}else{bubble(i,[t.msg,t.msgCn][r.config.lanCode],"error",3e3,{tmpl:e})}setTimeout(function(){location.reload()},3e3)}else{location.reload()}}},function(){i.removeClass("disabled")})}else{setTimeout(function(){i.removeClass("disabled")},1e3)}});t.after(n)}})}})}};t.prototype.loadLib=function(t){var n=[];var i=[{exports:"Promise",uri:"https://www.micstatic.com/common/js/libs/es6-promise.min_f2f19670.js"},{exports:"bubble",uri:"https://www.micstatic.com/common/js/assets/bubble/bubble_0f687eb8.js"},{exports:"checkMeetingBase",uri:"https://www.micstatic.com/common/js/assets/feature/meeting_b8fad1fe.js"}];var e=function t(e){i.map(function(e){if(typeof window[e.exports]=="undefined"||window[e.exports]=="undefined"){n.push(new Promise(function(t){o(e.uri,function(){t("ok")})}))}});Promise.all(n).then(e)};if(typeof window[i[0].exports]=="undefined"){o(i[0].uri,function(){e(t)})}else{e(t)}};t.prototype.use=function(t){var e=this;this.loadLib(function(){e.config.select=t;if(!$("#startMeetingStyle").length){$($("head")[0]).append(e.config.style)}e.checkMeetingBase().then(function(t){if(t){return new Promise(function(t){t(true)})}else{return new Promise(function(t,e){e("不支持WEBRTC！！")})}}).then(function(){return e.getStatus()}).then(function(t){if(t){e.init(t)}})})};t.prototype.test=function(){var n=this;$(n.config.select).each(function(){var t=$(this).attr("theme");var e=$(n.startMeetingHtml(t));$(this).after(e)})}};window.StartMeeting=t}.call(this);if($(".J-start-meeting").length){var firstInitMeeting;if(!firstInitMeeting){firstInitMeeting=new StartMeeting;firstInitMeeting.use(".J-start-meeting")}}
//# sourceMappingURL=../../../../__sources__/common/js/assets/startMeeting/startMeeting_3724b694.js.map
