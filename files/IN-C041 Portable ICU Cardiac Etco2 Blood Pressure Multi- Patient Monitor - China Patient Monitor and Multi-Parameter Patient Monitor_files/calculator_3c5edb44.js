(function(d){var u=util.tpl('\x3c!--## FreightCostCalcula ##--\x3e\r\n<div id="freight-cost-calculator-content" class="freight-cost-calculator">\r\n    \x3c!-- 顶部 --\x3e\r\n    <div class="top-container">\r\n        <div class="prod-container">\r\n            \x3c!-- 缩略图部分 --\x3e\r\n            <div class="thumbnail-container">\r\n                <img id="productImage" alt="">\r\n\r\n            </div>\r\n            \x3c!-- 中间文字部分 --\x3e\r\n            <div class="center-text-container">\r\n                <div id="productName" title={{-productName}} class="descripe">\r\n                {{-productName}} \r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        \x3c!-- 计数器部分 --\x3e\r\n        <div class="calc-container">\r\n            \x3c!-- <p class="des">Shipment Qty:</p>\r\n            <div class="demo-wrap" id="J-calc">\r\n                <input type="number" class="J-inputnumber4" />\r\n                <span id="J-number-unit" class="unit">Pieces</span>\r\n            </div> --\x3e\r\n            <div class="title-content-container">\r\n                <div>\r\n                    <p class="title">Purchase Qty</p>\r\n                    <div id="purchaseQty">\r\n                        <p class="content">To Be Negotiated</p>\r\n                    </div>\r\n                </div>\r\n                <div style="margin-left:20px">\r\n                    <p class="title">Reference FOB Price</p>\r\n                    <div id="referenceFob">\r\n                        <p class="content">To Be Negotiated</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \x3c!-- 底部 --\x3e\r\n    \x3c!-- <input type="text" name="country" id="autocomplete"/> --\x3e\r\n    <div class="bottom-container">\r\n        <div class="origin-container">\r\n            <div class="title">\r\n                Origin\r\n            </div>\r\n            <div>\r\n                <form class="ft-form J-send-delivery-form" novalidate="novalidate" id="myform2">\r\n                    <div class="ft-form-item form-select-item-container">\r\n                        <div class="ft-form-label">\r\n                            <label for="fieldA">Location Type:</label>\r\n                        </div>\r\n                        <div class="ft-form-field">\r\n                            <select class="J-country-select" id="J-origin-country-select" value="{{-origin.locationType}}">\r\n                                <option title="Pickup at port warehouse, no trucking included" value="1">Port/Airport\r\n                                </option>\r\n                                <option title="Industrial setting with loading dock" value="2">Factory/Warehouse\r\n                                </option>\r\n                                <option title="Commercial address with no loading capabilities" value="3">Business\r\n                                    address\r\n                                    (needs liftgate)\r\n                                </option>\r\n                                <option title="Home address with no loading capabilities" value="4">Residential address\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="ft-form-item form-select-item-container">\r\n                        <div class="ft-form-label">\r\n                            <label for="fieldB">Country/Region:</label>\r\n                        </div>\r\n                        <div class="ft-form-field input-disable-font">\r\n                            <input type="text" value="China" disabled class="ft-input-text" id="fieldB" name="fieldB" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="ft-form-item form-select-item-container">\r\n                        <div class="ft-form-label">\r\n                            <label for="fieldC" class="J-origin-label">Port:</label>\r\n                        </div>\r\n                        <div class="ft-form-field" id="originInputautocomplete-list-port" style="position:relative">\r\n                            <input id="originInput" select="false" value="{{-origin.city}}" autocomplete="off"\r\n                                type="text" name="myCountry" class="ft-input-text"\r\n                                placeholder="Enter Port"\r\n                                placeid="{{-origin.placeId}}" \r\n                            />\r\n                            <div id="originInputError"></div>\r\n                            <div id="originInputautocomplete-list"></div>\r\n                            <div class="origin-tip">\r\n                                - Popular Origin:Shanghai,Ningbo,Tianjin,<br>Tangshan,Qingdao,Guangzhou\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div class="bottom-middle"></div>\r\n        <div class="destination-container">\r\n            <div class="title">\r\n                Destination\r\n            </div>\r\n            <div>\r\n                <form class="ft-form" novalidate="novalidate" id="myform3">\r\n                    <div class="ft-form-item form-select-item-container">\r\n                        <div class="ft-form-label">\r\n                            <label for="fieldD">Location Type:</label>\r\n                        </div>\r\n                        <div class="ft-form-field">\r\n                            <select class="J-country-select" id="J-destination-country-select" value="{{-destination.locationType}}">\r\n                                <option title="Pickup at port warehouse, no trucking included" value="1">Port/Airport\r\n                                </option>\r\n                                <option title="Industrial setting with loading dock" value="2">Warehouse\r\n                                </option>\r\n                                <option title="Commercial address with no loading capabilities" value="3">Business\r\n                                    address\r\n                                    (needs liftgate)\r\n                                </option>\r\n                                <option title="Home address with no loading capabilities" value="4">Residential address\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="ft-form-item form-select-item-container">\r\n                        <div class="ft-form-label">\r\n                            <label for="fieldE">Country/Region:</label>\r\n                        </div>\r\n                        <div class="ft-form-field">\r\n                            <input type="text" class="ft-input-text" placeholder="Enter Country/Region"\r\n                                value="{{-destination.locationPortCode}}" autocomplete="off" select="false"\r\n                                id="destinationLocationPortCode" name="fieldE" />\r\n                            <div id="destinationLocationPortCodeError"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="ft-form-item form-select-item-container">\r\n                        <div class="ft-form-label">\r\n                            <label for="fieldF" class="J-destination-label">Port:</label>\r\n                        </div>\r\n                        <div class="ft-form-field" id="destinationInputautocomplete-list-port">\r\n                            <input id="destinationInput" select="false" value="{{-destination.city}}" autocomplete="off"\r\n                                type="text" name="myCountry" class="ft-input-text"\r\n                                placeholder="Enter Port" \r\n                                placeid="{{-destination.placeId}}"\r\n                            />\r\n                            <div id="destinationInputError"></div>\r\n                            <div id="destinationInputautocomplete-list"></div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!--## end ##--\x3e\r\n\r\n\x3c!--## FreightCostCalculatorResult ##--\x3e\r\n<div class="freight-cost-calculator-result-content" id="freight-cost-calculator-result">\r\n    <div class="linear-loader" id="freight-cost-calculator-linear-loader"></div>\r\n    <div class="top-bottom-container">\r\n        <div class="top-container">\r\n            <div class="left">\r\n                <div class="top">\r\n                    <div class="img-des-container">\r\n\r\n                        <img src="https://www.micstatic.com/athena/2017/img/product-detail/start_301531fa.png" alt="">\r\n\r\n\r\n                        <div>\r\n                            <p>\r\n                                {{ if(origin.type*1==1){ }}\r\n                                <span class="city">{{-origin.cityName}}</span>\r\n                                {{ } }}\r\n                                {{ if(origin.type*1!=1){ }}\r\n                                <span class="city">{{-origin.cityName}}</span>\r\n                                {{ } }}\r\n\r\n                                <span class="country">- {{-origin.locationPortCode}}</span>\r\n                            </p>\r\n                            <p>\r\n                                {{ if(origin.type*1==1){ }}\r\n                                <span class="factory-warehouse">Port (FOB)</span>\r\n                                {{ } }}\r\n                                {{ if(origin.type*1==2){ }}\r\n                                <span class="factory-warehouse">Factory / Warehouse</span>\r\n                                {{ } }}\r\n                                {{ if(origin.type*1==3){ }}\r\n                                <span class="factory-warehouse">Business</span>\r\n                                {{ } }}\r\n                                {{ if(origin.type*1==4){ }}\r\n                                <span class="factory-warehouse">Residential</span>\r\n                                {{ } }}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="edit">\r\n                        <button class="ft-btn ft-btn-link" id="J-calculate-edit"><i class="ft-icon icon-fill-text"></i><span>Edit</span></button>\r\n                    </div>\r\n                </div>\r\n                <div class="line"></div>\r\n                <div class="bottom">\r\n                    <div class="top">\r\n                        <div class="img-des-container">\r\n                            <img src="https://www.micstatic.com/athena/2017/img/product-detail/end_679fc702.png" alt="">\r\n                            <div>\r\n                                <p>\r\n                                    {{ if(destination.type*1==1){ }}\r\n                                    <span class="city">{{-destination.cityName}}</span>\r\n                                    {{ } }}\r\n                                    {{ if(destination.type*1!=1){ }}\r\n                                    <span class="city">{{-destination.cityName}}</span>\r\n                                    {{ } }}\r\n                                    <span class="country">- {{-destination.locationPortCode}}</span>\r\n                                </p>\r\n                                <p>\r\n                                    {{ if(destination.type*1==1){ }}\r\n                                    <span class="factory-warehouse">Port (FOB)</span>\r\n                                    {{ } }}\r\n                                    {{ if(destination.type*1==2){ }}\r\n                                    <span class="factory-warehouse">Factory / Warehouse</span>\r\n                                    {{ } }}\r\n                                    {{ if(destination.type*1==3){ }}\r\n                                    <span class="factory-warehouse">Business</span>\r\n                                    {{ } }}\r\n                                    {{ if(destination.type*1==4){ }}\r\n                                    <span class="factory-warehouse">Residential</span>\r\n                                    {{ } }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="right">\r\n                <div class="right-left">\r\n                    <div class="img-box">\r\n                        <img src="{{-productImage}}" class="img-inner"/>\r\n                    </div>\r\n                </div>\r\n                <div class="right-center">\r\n                    <div class="des">{{-productName}}</div>    \r\n                    \x3c!-- <div>\r\n                        <span class="des-label">Shipment Qty:</span>\r\n                        <span class="des-value">{{-num}} {{-unit}}</span>\r\n                    </div> --\x3e\r\n                </div>\r\n                <div class="right-right">\r\n                    <div class="edit">\r\n                        \x3c!-- <div><i class="ft-icon icon-fill-text"></i></div>\r\n                        <div><span>Edit</span></div> --\x3e\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="bottom-container">\r\n            \x3c!-- 有数据时显示表格区域 --\x3e\r\n            <div class="have-data-container calculate-table">\r\n                \x3c!-- 表格头部区域 --\x3e\r\n                <table class="ft-table is-normal  is-hover">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col width="225">\r\n                    </colgroup>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Method</th>\r\n                            <th>Type</th>\r\n                            <th>Shipping Cost</th>\r\n                            <th>Transit Time</th>\r\n                            <th>Remarks</th>\r\n                        </tr>\r\n                    </thead>\r\n\r\n                    <tbody id="tableBody">\r\n\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div id="data-loading">\r\n                <img src="https://www.micstatic.com/athena/2017/img/product-detail/loading-icon_1d4a2eb3.png" alt="">\r\n                <div style="font-family: Roboto;\r\n                font-size: 16px;\r\n                font-style: normal;\r\n                font-weight: 400;\r\n                line-height: 24px;\r\n                letter-spacing: 0px;\r\n                text-align: center;\r\n                margin-top: 16px;                \r\n                ">Trying to query,please wait patiently!</div>\r\n            </div>\r\n            \x3c!-- 无数据时显示图片 --\x3e\r\n            {{ if(!(dataExpress.length && inquiryItem.length)){ }}\r\n            <div class="none-data-container">\r\n                <div class="no-data-img-container">\r\n                </div>\r\n                <div class="no-data-p-container">\r\n                    <p>\r\n                        Sorry，there are no results for this search.\r\n                    </p>\r\n                    <p>\r\n                        <a target="_blank" id="click-here" href="//membercenter.made-in-china.com/shipping/page/shipment/submit.html">Click here</a>\r\n                        to release your shipping requirements, and we will reply the matching results as soon as\r\n                        possible.\r\n\r\n                        Contact us: <a title="logistics_services@made-in-china.com" href="javascript:void(0);"\r\n                            class="mail-to">logistics_services@made-in-china.com</a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            {{ } }}\r\n            <div class="tab-des">\r\n                <div class="tab-title">\r\n                    <a class="link J-book-click">Click here</a> for more international logistics quotations.\r\n                </div>\r\n                <p>·All Prices in USD.</p> \r\n                <p>·The default shipping date is the 15th day after the current query date, and the subsequent actual shipping price will fluctuate.\r\n                </p>\r\n                <p>·Insurance, duty and VAT are not included in this quotation. Please contact the supplier if necessary.</p>\r\n                <p>·This chart is for reference only. Actual costs may vary.</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!--## end ##--\x3e\r\n\r\n\x3c!--## FreightTableResult ##--\x3e\r\n{{ _.each(fclData, function(item, index){ }}\r\n        <tr>\r\n            {{if(index == 0 && !!lclData.length){ }}\r\n                <td rowspan="2" style="border-right: 1px solid #dae0e6;">Sea Freight</td>\r\n            {{ } }}\r\n            {{if(index == 0 && !lclData.length){ }}\r\n                <td style="border-right: 1px solid #dae0e6;">Sea Freight</td>\r\n            {{ } }}\r\n            <td>\r\n                <b class="pro-type-name">FCL</b> <br>\r\n                <span class="pro-type-desc">20GP Container*1</span>\r\n            </td>\r\n            {{ if(!!item.totalShippingFee.value){ }}\r\n                <td>US ${{-item.totalShippingFee.value}}</td>\r\n            {{ }else{ }}\r\n                <td>To Be Negotiated</td>\r\n            {{ } }}\r\n            <td>{{-item.voyageFrom.value}} - {{-item.voyageTo.value}}{{-item.voyageFrom.unitCode}} </td>\r\n            <td>\r\n                There are other specifications for FCL. Take a 20GP cabinet as an example.\r\n            </td>\r\n        </tr>\r\n{{ }) }}\r\n\r\n{{ _.each(lclData, function(item, index){ }}\r\n        <tr>\r\n            {{if(index == 0 && !fclData.length){ }}\r\n                <td style="border-right: 1px solid #dae0e6;">Sea Freight</td>\r\n            {{ } }}\r\n            <td>\r\n                <b class="pro-type-name">LCL</b> <br>\r\n                <span class="pro-type-desc">1 Piece: {{-volume}} CBM, {{-weight}} KG</span>\r\n            </td>\r\n            {{ if(!!item.totalShippingFee.value){ }}\r\n                <td>US ${{-item.totalShippingFee.value}}</td>\r\n            {{ }else{ }}\r\n                <td>To Be Negotiated</td>\r\n            {{ } }}\r\n            <td>{{-item.voyageFrom.value}} {{-item.voyageFrom.unitCode}} </td>\r\n            <td>\r\n                LCL is the minimum order quantity multiplied by the weight and volume of the unit product.\r\n            </td>\r\n        </tr>\r\n{{ }) }}\r\n\r\n{{ _.each(fareData, function(item, index){ }}\r\n\r\n    <tr>\r\n        <td style="border-right: 1px solid #dae0e6;">Express</td>\r\n        <td>\r\n            <b class="pro-type-name">{{-item.supplier}}</b> <br>\r\n            <span class="pro-type-desc">1 Piece</span>\r\n        </td>\r\n        {{ if(!!item.fee){ }}\r\n            <td>US ${{-item.fee}}</td>\r\n        {{ }else{ }}\r\n            <td>To Be Negotiated</td>\r\n        {{ } }}\r\n        <td>{{-item.arriveDay}} Days</td>\r\n        <td>\r\n            The express is calculated by buying one. Please pay attention to the minimum order quantity of the product.\r\n        </td>\r\n    </tr>\r\n\r\n{{ }) }}\r\n\r\n<tr id="airFright">\r\n    <td colspan="1" style="border-right: 1px solid #dae0e6;">Air Freight</td>\r\n    <td colspan="4"><b>Comming Soon</b></td>\r\n</tr>\r\n\x3c!--## end ##--\x3e');u=util.templatify(u);var e=util.tpl('\r\n\x3c!--## select ##--\x3e\r\n<div class="select unit-select">\r\n\t<div class="select-title J-select-title">\r\n\t\t<span class="select-label J-label" style="display:none"></span>\r\n\t\t<div class="select-selected">\r\n\t\t\t<span class="J-text"></span>\r\n\t\t</div>\r\n\t\t<div class="select-arrow J-arrow">\r\n\t\t\t<i class="micon">&#xe006;</i>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="select-list J-select-list to-right">\r\n\t\t{{ if(isShowTab){ }}\r\n\t\t\t<div class="select-tabs-wrap">\r\n\t\t\t\t<ul class="select-tabs J-select-tabs">\r\n\t\t\t\t\t{{ util.each(tabs, function(tab){ }}\r\n\t\t\t\t\t\t<li class="select-tab J-select-tab">{{=tab.name}}</li>\r\n\t\t\t\t\t{{ }); }}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t{{ } }}\r\n\r\n\t\t{{ util.each(tabs, function(tab){ }}\r\n\t\t\t<ul class="select-list-wrap J-select-tab-cnt">\r\n\t\t\t\t{{ util.each(tab.items, function(item){ }}\r\n\t\t\t\t\t{{ if(item.type === ITEM_TYPE.OPTION){ }}\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<a href="javascript:void(\'{{=item.name}}\')" cz-id="{{=item.id}}" class="select-opt J-opt{{ if(item.css){ }} {{=item.css}}{{ } }}{{ if(item.disabled){ }} disabled{{ } }}"{{ if(item.title){ }} title="{{-item.title}}"{{ } }}>\r\n                                <p class="select-opt-text">{{-item.name}}</p>\r\n                                <p class="select-opt-title">{{-item.title}}</p>\r\n                            </a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t{{ }else if(item.type === ITEM_TYPE.GROUP){ }}\r\n\t\t\t\t\t\t<li class="select-group{{ if(isShowTab){ }} select-multab-group{{}}}">\r\n\t\t\t\t\t\t\t<dl>\r\n\t\t\t\t\t\t\t\t<dt class="select-opt-label{{ if(item.css){ }} {{=item.css}}{{ } }}"{{ if(item.title){ }} title="{{-item.title}}"{{ } }}>{{-item.name}}</dt>\r\n\t\t\t\t\t\t\t\t{{ util.each(item.children, function(child){ }}\r\n\t\t\t\t\t\t\t\t\t<dd class="select-opt-val"><a href="javascript:void(\'{{=child.name}}\')" cz-id="{{=child.id}}" cz-pid="{{=item.id}}" class="select-opt J-opt{{ if(child.css){ }} {{=child.css}}{{ } }}{{ if(item.disabled){ }} disabled{{ } }}"{{ if(child.title){ }} title="{{-child.title}}"{{ } }}><label class="select-opt-text">{{-child.name}}</label></a></dd>\r\n\t\t\t\t\t\t\t\t{{ }) }}\r\n\t\t\t\t\t\t\t</dl>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t{{ } }}\r\n\t\t\t\t{{ }); }}\r\n\t\t\t</ul>\r\n\t\t{{ }); }}\r\n\t</div>\r\n</div>\r\n\x3c!--## end ##--\x3e');e=util.templatify(e);var t={init:function t(){var s=this;s.productObj={origin:{originInputcity:[],originCountrySelect:"",originplaceId:"",countryArray:"",check:false},destination:{destinationInputcity:[],countryArray:[],originplaceId:"",check:false}};d(document).on("click","#freight-cost-calculator",function(t){t.cancelBubble=true;s.openDialog()});d(document).on("click",".J-book-click",function(){s.bookClick()});d(document).on("click","#J-calculate-edit",function(){if(d("#J-calculate-edit").attr("disabled")){return}s.openDialog("edit");s.CostCalculatorResultItem.remove()});d(document).on("change","#J-origin-country-select",function(){var t=d(this).closest(".ft-form").find("#originInput");if(d(this).val()=="1"){t.attr("placeholder","Enter Port");d(".J-origin-label").html("Port:")}else{t.attr("placeholder","Enter city or zip code");d(".J-origin-label").html("City/Zip code:")}s.closeAllLists(null,t[0])});d(document).on("change","#J-destination-country-select",function(){var t=d(this).closest(".ft-form").find("#destinationInput");if(d(this).val()=="1"){t.attr("placeholder","Enter Port");d(".J-destination-label").html("Port:")}else{t.attr("placeholder","Enter city or zip code");d(".J-destination-label").html("City/Zip code:")}s.closeAllLists(null,t[0])});d(document).on("blur","#originInput",function(t){if(d("#originInputautocomplete-list-port").find(".ft-loading")||!d("#originInput").val()){d("#originInputautocomplete-list-port").find(".ft-loading").remove()}});d(document).on("change","#destinationLocationPortCode",function(t){d("#destinationInput").val("");if(!d("#destinationLocationPortCode").val()){d("#destinationLocationPortCodeError").html("Please select Country/Region.");d("#destinationLocationPortCodeError").addClass("error")}else{d("#destinationLocationPortCodeError").html("");d("#destinationLocationPortCodeError").removeClass("error")}});var n=null;d(document).on("input","#originInput",function(t){d("#originInput").attr("select","false");d("#originInputError").val("");var l=this;var e=d("#J-origin-country-select").val();s.closeAllLists(null,document.getElementById("originInput"));clearTimeout(n);n=setTimeout(function(){if(d("#originInput").val().length>2){if(d("#originInputautocomplete-list-port").find(".ft-loading")||!d("#originInput").val()){d("#originInputautocomplete-list-port").find(".ft-loading").remove()}else{if(!d("#originInputautocomplete-list-port").find(".ft-loading")){d("#originInputautocomplete-list-port").append('<div class="ft-loading"> <i class="ft-loading__page is-s"></i> </div>')}}if(e=="1"){d.ajax({url:"/fuzzyQueryPort",type:"get",data:{search:d("#originInput").val().trim(),countryKey:s.productObj.origin.countryObj.counrtyAbbreviate},xhrFields:{withCredentials:true},success:function t(e){if(e.code!=="0"||!e.data){return}if(e.data.length&&d("#originInput").val()){d("#originInputautocomplete-list-port").find(".ft-loading").remove()}if(e.data){var n=e.data;n.forEach(function(t,e){t.cityName=t.city});s.productObj.origin.originInputcity=n;var i,a,r,o=l.value;s.portInputAction(i,a,r,document.getElementById("originInput"),n,o,l,s)}}})}else{d.ajax({url:"/cityAutoComplete",type:"get",data:{search:d("#originInput").val().trim(),country:s.productObj.origin.countryObj.counrtyAbbreviate},xhrFields:{withCredentials:true},success:function t(e){if(e.code!=="0"||!e.data){return}if(e.data.length&&d("#originInput").val()){d("#originInputautocomplete-list-port").find(".ft-loading").remove()}if(e.data&&e.data.length){s.productObj.origin.originInputcity=e.data;var n,i,a,r=l.value;s.focusAndInputAction(n,i,a,document.getElementById("originInput"),e.data,r,l,s)}}})}}},500)});var i=null;d(document).on("focus","#originInput",function(t){var l=this;var e=d("#J-origin-country-select").val();d("#originInputError").html("");d("#originInputError").val("");s.closeAllLists(null,document.getElementById("originInput"));clearTimeout(i);i=setTimeout(function(){if(d("#originInput").val().length>2){if(d("#originInputautocomplete-list-port").find(".ft-loading")||!d("#originInput").val()){d("#originInputautocomplete-list-port").find(".ft-loading").remove()}else{if(!d("#originInputautocomplete-list-port").find(".ft-loading")){d("#originInputautocomplete-list-port").append('<div class="ft-loading"> <i class="ft-loading__page is-s"></i> </div>')}}if(e=="1"){d.ajax({url:"/fuzzyQueryPort",type:"get",data:{search:d("#originInput").val().trim(),countryKey:s.productObj.origin.countryObj.counrtyAbbreviate},xhrFields:{withCredentials:true},success:function t(e){if(e.code!=="0"||!e.data){return}if(e.data.length&&d("#originInput").val()){d("#originInputautocomplete-list-port").find(".ft-loading").remove()}if(e.data){var n=e.data;n.forEach(function(t,e){t.cityName=t.city});s.productObj.origin.originInputcity=n;var i,a,r,o=l.value;s.portInputAction(i,a,r,document.getElementById("originInput"),n,o,l,s)}}})}else{d.ajax({url:"/cityAutoComplete",type:"get",data:{search:d("#originInput").val().trim(),country:s.productObj.origin.countryObj.counrtyAbbreviate},xhrFields:{withCredentials:true},success:function t(e){if(e.code!=="0"||!e.data){return}if(e.data.length&&d("#originInput").val()){d("#originInputautocomplete-list-port").find(".ft-loading").remove()}if(e.data&&e.data.length){s.productObj.origin.originInputcity=e.data;var n,i,a,r=l.value;s.focusAndInputAction(n,i,a,document.getElementById("originInput"),e.data,r,l,s)}}})}}},300)});d(document).on("blur","#destinationInput",function(){if(d("#destinationInputautocomplete-list-port").find(".ft-loading")||!d("#destinationInput").val()){d("#destinationInputautocomplete-list-port").find(".ft-loading").remove()}});var a=null;d(document).on("input","#destinationInput",function(){d("#destinationInput").attr("select","false");d("#destinationInputError").val("");d("#destinationInputError").html("");var l=this;var t=d("#J-destination-country-select").val();if(!d("#destinationLocationPortCode").val()){d("#destinationLocationPortCodeError").html("Please select Country/Region.");d("#destinationLocationPortCodeError").addClass("error");return}else{d("#destinationLocationPortCodeError").html("");d("#destinationLocationPortCodeError").removeClass("error")}s.closeAllLists(null,document.getElementById("destinationInput"));var e;for(var n=0;n<s.productObj.destination.countryArray.length;n++){if(d("#destinationLocationPortCode").val().trim().toUpperCase()===s.productObj.destination.countryArray[n].countryName.toUpperCase()){e=s.productObj.destination.countryArray[n].counrtyAbbreviate}}clearTimeout(a);a=setTimeout(function(){if(d("#destinationInput").val().length>2){if(d("#destinationInputautocomplete-list-port").find(".ft-loading")||!d("#destinationInput").val()){d("#destinationInputautocomplete-list-port").find(".ft-loading").remove()}else{if(!d("#destinationInputautocomplete-list-port").find(".ft-loading")){d("#destinationInputautocomplete-list-port").append('<div class="ft-loading"> <i class="ft-loading__page is-s"></i> </div>')}}if(t=="1"){d.ajax({url:"/fuzzyQueryPort",type:"get",data:{search:d("#destinationInput").val().trim(),countryKey:e},xhrFields:{withCredentials:true},success:function t(e){if(e.code!=="0"||!e.data){return}if(e.data.length&&d("#destinationInput").val()){d("#destinationInputautocomplete-list-port").find(".ft-loading").remove()}if(e.data){var n=e.data;n.forEach(function(t,e){t.cityName=t.city});s.productObj.destination.destinationInputcity=n;var i,a,r,o=l.value;s.portInputAction(i,a,r,document.getElementById("destinationInput"),n,o,l,s)}}})}else{d.ajax({url:"/cityAutoComplete",type:"get",data:{search:d("#destinationInput").val().trim(),country:e},xhrFields:{withCredentials:true},success:function t(e){if(e.code!=="0"||!e.data){return}if(e.data.length&&d("#destinationInput").val()){d("#destinationInputautocomplete-list-port").find(".ft-loading").remove()}if(e.data){s.productObj.destination.destinationInputcity=e.data;var n,i,a,r=l.value;s.focusAndInputAction(n,i,a,document.getElementById("destinationInput"),e.data,r,l,s)}}})}}},300)});var r=null;d(document).on("focus","#destinationInput",function(){var l=this;var t=d("#J-destination-country-select").val();d("#originInputError").val("");if(!d("#destinationLocationPortCode").val()){return}s.closeAllLists(null,document.getElementById("destinationInput"));var e;for(var n=0;n<s.productObj.destination.countryArray.length;n++){if(d("#destinationLocationPortCode").val().trim().toUpperCase()===s.productObj.destination.countryArray[n].countryName.toUpperCase()){e=s.productObj.destination.countryArray[n].counrtyAbbreviate}}clearTimeout(r);r=setTimeout(function(){if(d("#destinationInput").val().length>2){if(d("#destinationInputautocomplete-list-port").find(".ft-loading")||!d("#destinationInput").val()){d("#destinationInputautocomplete-list-port").find(".ft-loading").remove()}else{if(!d("#destinationInputautocomplete-list-port").find(".ft-loading")){d("#destinationInputautocomplete-list-port").append('<div class="ft-loading"> <i class="ft-loading__page is-s"></i> </div>')}}if(t=="1"){d.ajax({url:"/fuzzyQueryPort",type:"get",data:{search:d("#destinationInput").val().trim(),countryKey:e},xhrFields:{withCredentials:true},success:function t(e){if(e.code!=="0"||!e.data){return}if(e.data.length&&d("#destinationInput").val()){d("#destinationInputautocomplete-list-port").find(".ft-loading").remove()}if(e.data){var n=e.data;n.forEach(function(t,e){t.cityName=t.city});s.productObj.destination.destinationInputcity=n;var i,a,r,o=l.value;s.portInputAction(i,a,r,document.getElementById("destinationInput"),n,o,l,s)}}})}else{d.ajax({url:"/cityAutoComplete",type:"get",data:{search:d("#destinationInput").val().trim(),country:e},xhrFields:{withCredentials:true},success:function t(e){if(e.code!=="0"||!e.data){return}if(e.data.length&&d("#destinationInput").val()){d("#destinationInputautocomplete-list-port").find(".ft-loading").remove()}if(e.data){s.productObj.destination.destinationInputcity=e.data;var n,i,a,r=l.value;s.focusAndInputAction(n,i,a,document.getElementById("destinationInput"),e.data,r,l,s)}}})}}},300)});d(document).on("input","#destinationLocationPortCode",function(){var t=d("#destinationLocationPortCode").val();var e=/\s+/g;d("#destinationLocationPortCode").val(t.replace(e," "))});d(document).on("input","#originInput",function(){var t=d("#originInput").val();var e=/\s+/g;var n=t.replace(e," ");d("#originInput").val(n)})},openDialog:function t(a){var l=this;var e=d("#productId").val();var r;var o=[];var s="";var c="";d.ajax({url:"/productInfo",type:"get",data:{productId:e},xhrFields:{withCredentials:true},success:function t(e){var n;if(e){n=JSON.parse(e)}if(n.code!=="0"){return}s=n.data.minOrder;d("#productImage").attr("src",n.data.productImage);d("#productName").text(l.HTMLDecode(n.data.productName));d("#productName").attr("title",n.data.productName);if(n.data.productName.length>110){d("#productName").addClass("green")}if(n.data.order2PriceList.length>0){c=l.HTMLDecode(n.data.order2PriceList[0].minOrderUnitKey);d("#purchaseQty").find(".content").remove();d("#referenceFob").find(".content").remove();var i="";var a="";var r=n.data.order2PriceList;for(var o=0;o<r.length;o++){if(r[o].minOrderUnitKey){a=a+'<p class="content">'+r[o].order+" "+r[o].minOrderUnitKey+"</p>"}else if(!r[o].minOrderUnitKey){+'<p class="content">'+r[o].order+"Pieces</p>"}i=i+'<p class="content">US $'+r[o].price+"</p>"}d("#J-number-unit").text(l.HTMLDecode(r[0].minOrderUnitKey));d("#J-number-unit").attr("title",r[0].minOrderUnitKey);d("#purchaseQty").html(a);d("#referenceFob").html(i)}l.lclParam={totalVolume:n.data.volume,totalWeight:n.data.weight}}});d.ajax({url:"/allCountry",type:"get",xhrFields:{withCredentials:true},success:function t(e){if(e.code!=="0"){return}if(e.code==="0"){r=e.data;l.productObj.destination.countryArray=e.data;for(var n=0;n<r.length;n++){if(r[n].countryNameCn==="中国"){l.productObj.origin.countryObj=r[n]}o.push(r[n].countryName)}var i=d("#loginCountry").val();if(!!i&&!a){d("#destinationLocationPortCode").val(i).attr("select","true")}}}});if(a){var n={num:l.freightCostCalculatorResultObj.num||50,origin:{locationType:l.freightCostCalculatorResultObj.origin.type+""||"",city:l.freightCostCalculatorResultObj.origin.city||"",locationPortCode:"China",type:l.freightCostCalculatorResultObj.origin.type||"",placeId:l.productObj.origin.originplaceId,dataName:l.productObj.origin.dataName,cityName:l.productObj.origin.cityName},destination:{locationType:l.freightCostCalculatorResultObj.destination.type+""||"",city:l.freightCostCalculatorResultObj.destination.city||"",locationPortCode:l.freightCostCalculatorResultObj.destination.locationPortCode||"",type:l.freightCostCalculatorResultObj.destination.type||"",placeId:l.productObj.destination.originplaceId,dataName:l.productObj.destination.dataName,cityName:l.productObj.destination.cityName}};var i=u.FreightCostCalcula(Object.assign({num:50,unit:"Pieces",productName:"--",productImage:"",startPng:"/athena/2017/img/start.png",endPng:"/athena/2017/img/end.png",noDataPng:"/athena/2017/img/nodata.png",order2PriceList:[]},n));l.dialogAction(i,c,s,o,a)}else{var i=u.FreightCostCalcula(Object.assign({num:50,unit:"Pieces",productName:"--",productImage:"",startPng:"/athena/2017/img/start.png",endPng:"/athena/2017/img/end.png",noDataPng:"/athena/2017/img/nodata.png",order2PriceList:[]},{num:50,origin:{locationType:"",city:"",locationPortCode:"China",type:"",placeId:""},destination:{locationType:"",city:"",locationPortCode:"",type:"",placeId:""}}));l.dialogAction(i,c,s,o,a)}},HTMLDecode:function t(e){var n=document.createElement("div");n.innerHTML=e;var i=n.innerText||n.textContent;n=null;return i},toTXT:function t(e){var n=/\<|\>|\"|\'|\&|　| /g;e=e.replace(n,function(t){switch(t){case"<":return"&lt;";break;case">":return"&gt;";break;case'"':return"&quot;";break;case"'":return"&#39;";break;case"&":return"&amp;";break;case" ":return"&ensp;";break;case"　":return"&emsp;";break;default:break}});return e},dialogAction:function t(e,o,n,l,i){var s=this;return s.openDialogItem=new future.Dialog.createDialog({quickClose:false,title:"Freight Cost Calculator",content:e,width:860,fixed:true,okValue:'<span id="freight-cost-calculator-result-button">Quote</span>',ok:function t(){var e=d("#J-origin-country-select").val()*1;var n=d("#J-destination-country-select").val()*1;s.productObj.origin.originplaceId=null;s.productObj.destination.originplaceId=null;if(e!==1){s.productObj.origin.originplaceId=d("#originInput").attr("placeid")}if(n!==1){s.productObj.destination.originplaceId=d("#destinationInput").attr("placeid")}var i={origin:{locationType:e===1?1:3,city:d("#originInput").attr("city"),locationPortCode:e!==1?d("#fieldB").val().trim():d("#originInput").attr("data-name"),type:d("#J-origin-country-select").val().trim(),placeId:e!==1?s.productObj.origin.originplaceId:null},destination:{locationType:n===1?1:3,city:d("#destinationInput").attr("city"),locationPortCode:n!==1?d("#destinationLocationPortCode").val().trim():d("#destinationInput").attr("data-name"),type:d("#J-destination-country-select").val().trim(),placeId:n!==1?s.productObj.destination.originplaceId:null},goodsReadyTime:(new Date).getTime()+15*24*60*60*1e3,fclParam:[{quantity:1,containerType:1}]};s.freightCostCalculatorResultObj={num:1,unit:o,origin:{locationType:d("#J-origin-country-select").val()*1||1,city:d("#originInput").val()||"",locationPortCode:d("#fieldB").val()||"",type:d("#J-origin-country-select").val()*1||1,placeId:"ChIJXWyyWdG1KF4R2Vt9pGRYgXw",dataName:e===1?d("#originInput").attr("data-name"):"",cityName:d("#originInput").attr("city")},destination:{locationType:d("#J-destination-country-select").val()*1||1,city:d("#destinationInput").val()||"",locationPortCode:d("#destinationLocationPortCode").val()||"",type:d("#J-destination-country-select").val()*1||1,placeId:"ChIJk3fE-iscMisRcIQkKqgXAgQ",dataName:n===1?d("#destinationInput").attr("data-name"):"",cityName:d("#destinationInput").attr("city")}};var a=s.sendValidate("destinationInput","destinationInputError");var r=s.sendValidate("originInput","originInputError");if(!d("#destinationLocationPortCode").val()||d("#destinationLocationPortCode").attr("select")=="false"){d("#destinationLocationPortCode").val("");d("#destinationLocationPortCodeError").html("Please select Country/Region.");d("#destinationLocationPortCodeError").addClass("error")}else{d("#destinationLocationPortCodeError").html("");d("#destinationLocationPortCodeError").removeClass("error")}s.freightCostCalculatorResultObj={num:1,unit:o,origin:s.freightCostCalculatorResultObj.origin,destination:s.freightCostCalculatorResultObj.destination,productName:d("#productName").html(),productImage:d("#productImage").attr("src"),startPng:"/athena/2017/img/start.png",endPng:"/athena/2017/img/end.png",noDataPng:"/athena/2017/img/nodata.png"};if(a&&r){s.openFreightCostCalculatorResultDialog(s.freightCostCalculatorResultObj,i)}return a&&r},onshow:function t(){d(document).on("input","#destinationLocationPortCode",function(t){var e=this;var n,i,a,r=e.value;s.focusAndInputActionCountry(n,i,a,document.getElementById("destinationLocationPortCode"),l,r,e,s)});d(document).on("focus","#destinationLocationPortCode",function(t){var e=this;var n,i,a,r=e.value;s.focusAndInputActionCountry(n,i,a,document.getElementById("destinationLocationPortCode"),l,r,e,s)});s.initOriginCountrySelect();s.initDestinationCountrySelect();if(i){d("#destinationInput").attr("select","true");d("#originInput").attr("select","true");var e=["Port (FOB)","Factory / Warehouse","Business","Residential"];d("#J-origin-country-select").val(s.freightCostCalculatorResultObj.origin.locationType);d("#J-destination-country-select").val(s.freightCostCalculatorResultObj.destination.locationType);d(d(".origin-container").find(".select-opt-text")[0]).html(e[s.freightCostCalculatorResultObj.origin.locationType-1]);d(d(".destination-container").find(".select-opt-text")[0]).html(e[s.freightCostCalculatorResultObj.destination.locationType-1]);d("#originInput").attr("city",s.freightCostCalculatorResultObj.origin.cityName);if(s.freightCostCalculatorResultObj.origin.locationType==1){d("#originInput").attr("data-name",s.freightCostCalculatorResultObj.origin.dataName)}d("#destinationInput").attr("city",s.freightCostCalculatorResultObj.destination.cityName);if(s.freightCostCalculatorResultObj.destination.locationType==1){d("#destinationInput").attr("data-name",s.freightCostCalculatorResultObj.destination.dataName)}}d("#freight-cost-calculator-content").parents().find(".ft-dialog")[0].style.maxWidth="1000px";d("#freight-cost-calculator-content").parents().children().find(".ui-dialog-button").addClass("product-details-dialog-button")},onclose:function t(){}})},openFreightCostCalculatorResultDialog:function t(e,n){var o=this;o.openDialogItem.remove();var i=d("#productId").val().trim();var a=u.FreightCostCalculatorResult(Object.assign(e,{inquiryItem:[]},{dataExpress:[]}));n.shipmentType=0;var r=d.ajax({url:"/evaluateSeaFee",type:"post",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(n)});var l=d.extend(true,{},n);delete l.fclParam;l.lclParam=o.lclParam;l.shipmentType=1;var s=d.ajax({url:"/evaluateSeaFee",type:"post",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(l)});var c=d.ajax({url:"/evaluateExpressFee?productId="+i+"&quantity="+o.freightCostCalculatorResultObj.num,type:"get",dataType:"json",xhrFields:{withCredentials:true}});d.when(r,s,c).done(function(){d("#data-loading").hide();d("#freight-cost-calculator-linear-loader").hide();d("#J-calculate-edit").removeAttr("disabled")}).then(function(t,e,n){var i=t[0].data&&t[0].data.inquiryItem||[];var a=e[0].data&&e[0].data.inquiryItem||[];var r=n[0].data||[];d("#tableBody").html(u.FreightTableResult({fclData:i,lclData:a,fareData:r,weight:o.lclParam.totalWeight,volume:o.lclParam.totalVolume}));if(!!i.length||!!r.length||!!a.length){d(".have-data-container").removeClass("have-data-init");d(".tab-des").show();o.CostCalculatorResultItem.reset()}else{d(".have-data-container").addClass("have-data-init");d(".none-data-container").show();d("#freight-cost-calculator-result").parents().find(".ui-dialog-footer").hide()}}).fail(function(t){d("#data-loading").hide();d("#freight-cost-calculator-linear-loader").hide();d("#J-calculate-edit").removeAttr("disabled");d(".have-data-container").addClass("have-data-init");d(".none-data-container").show();d("#freight-cost-calculator-result").parents().find(".ui-dialog-footer").hide()});return o.CostCalculatorResultItem=new future.Dialog.createDialog({title:"Freight Cost Calculator",content:a,width:900,fixed:true,quickClose:false,onbeforeremove:function t(){return},button:d("#supportOrder").attr("value")=="true"?[{value:"Contact Now",callback:function t(){window.open(d("#contactNow").attr("value"));return false}},{value:"Start Order",callback:function t(){window.open(d("#supportOrder").attr("data-url"));return false},autofocus:true}]:[{value:"Contact Now",callback:function t(){window.open(d("#contactNow").attr("value"));return false}}],onshow:function t(){d("#J-calculate-edit").attr("disabled",true);d(".have-data-container").addClass("have-data-init");d("#freight-cost-calculator-result").parents().find(".ft-dialog")[0].style.maxWidth="1000px";d("#freight-cost-calculator-result").parents().find(".ui-dialog-body")[0].style.padding="0"},onclose:function t(){}})},loginAction:function t(){var n="//membercenter.made-in-china.com/shipping/page/buyer/freight/inquiry.html";var i="//membercenter.made-in-china.com/shipping/page/seller/freight/inquiry.html";var a=this;d.ajax({url:"//membercenter.made-in-china.com/shipping/role.do",type:"get",xhrFields:{withCredentials:true},success:function t(e){if(e.code=="0"){if(e.data.frozen){if(!e.data.role&&e.data.role*1!=0){future.Dialog.GetWarnDialog({padding:"30px 30px 10px 30px",quickClose:false,isShowCloseBtn:false,content:'Sorry, Current system error . You can\'t use logistics service temporarily. Please email us<a title="logistics_services@made-in-china.com" href="javascript:void(0);"  class="mail-to">logistics_services@made-in-china.com</a>.',okValue:"confirm",ok:function t(){}})}else if(e.data.role*1==1){future.Dialog.GetWarnDialog({padding:"30px 30px 10px 30px",quickClose:false,isShowCloseBtn:false,content:'Sorry, your account is abnormal at present. You can\'t use booking service temporarily. Please email us <a title="logistics_services@made-in-china.com" href="javascript:void(0);"  class="mail-to">logistics_services@made-in-china.com</a>.',okValue:"confirm",ok:function t(){}})}else if(e.data.role*1==2){future.Dialog.GetWarnDialog({padding:"30px 30px 10px 30px",quickClose:false,isShowCloseBtn:false,content:'抱歉，当前您的帐户异常，暂不能使用运费计算器。请联系我们<a title="logistics_services@made-in-china.com" href="javascript:void(0);"  class="mail-to">logistics_services@made-in-china.com</a>.',okValue:"确认",ok:function t(){}})}else if(e.data.role*1==3){future.Dialog.GetWarnDialog({padding:"30px 30px 10px 30px",quickClose:false,isShowCloseBtn:false,content:'抱歉，当前您的帐户异常，暂不能使用物流服务。请联系我们<a title="logistics_services@made-in-china.com" href="javascript:void(0);"  class="mail-to">logistics_services@made-in-china.com</a>.',okValue:"确认",ok:function t(){}})}}else{if(e.data.role*1==0){a.loginHandle()}if(e.data.role*1==1){window.open(n)}if(e.data.role*1==2){window.open(i)}if(e.data.role*1==3){future.Dialog.GetWarnDialog({padding:"30px 30px 10px 30px",quickClose:false,isShowCloseBtn:false,content:'抱歉，当前您的帐户异常，暂不能使用物流服务。请联系我们<a title="logistics_services@made-in-china.com" href="javascript:void(0);"  class="mail-to">logistics_services@made-in-china.com</a>.',okValue:"确认",ok:function t(){}})}}}else{if(e.msg){future.Bubble.create({html:e.msg,type:"warning"})}}}})},bookClick:function t(e,n){var i=d("#login").val();if(i=="true"){this.loginAction()}else{this.loginHandle()}},loginHandle:function t(){var e=this;var n;if(window.parent!==window.self){try{n=window.parent.document.location.protocol}catch(t){if(window.document.location.protocol==="http:"){n="https:"}else{n="http"}}}else{n=window.document.location.protocol}var i="LOGON_CALLBACK_"+(new Date).valueOf();var a=n+"//www.made-in-china.com/im.do?xcase=tmLogonHandle&callback="+i;var r;if(document.domain!==location.hostname){a+="&domain="+document.domain}a=encodeURIComponent(a);window[i]=function(t){if(t.isLogin==="true"){r&&r.close();e.loginAction();d("#login").val("true")}};r=new artDialog({lock:true,fixed:true,title:"SIGN IN",duration:0,width:620,height:"auto",content:'<div class="aui_loading"></div>\n                    <iframe frameborder="0" style="width:100%; height:278px; display:none;" \n                        src="//login.made-in-china.com/logon.do?xcase=logonPage4TM3&forwardPage='.concat(a,'"\n                    ></iframe>'),close:function t(){console.log("close")},init:function t(){var e=this;d(this.DOM.content[0]).find("iframe").bind("load",function(){d(e.DOM.content[0]).find(".aui_loading").remove();d(e.DOM.content[0]).find("iframe").show()})}})},setScroll:function t(e){if(d(e).length>0){d(e).niceScroll({touchbehavior:true,cursorcolor:"#d4d4d4",cursorwidth:5,autohidemode:true});d(e).niceScroll().updateScrollBar()}},focusAndInputActionCountry:function t(e,n,i,a,r,o,l,s){s.closeAllLists(null,a);if(!o){return false}currentFocus=-1;e=document.createElement("DIV");e.setAttribute("id",l.id+"autocomplete-list");e.setAttribute("class","autocomplete-items");if(r.length){e.style.border="1px solid #d4d4d4"}l.parentNode.appendChild(e);for(i=0;i<r.length;i++){if(r[i].substr(0,o.length).toUpperCase()==o.toUpperCase()){n=document.createElement("DIV");n.innerHTML="<strong><span style='color:red'>"+r[i].substr(0,o.length)+"</span></strong>";n.innerHTML+=r[i].substr(o.length);n.innerHTML+="<input type='hidden' value='"+r[i]+"'>";n.addEventListener("click",function(t){t.stopPropagation();t.stopImmediatePropagation();t.preventDefault();a.value=this.getElementsByTagName("input")[0].value;d(a).attr("select","true");s.closeAllLists(null,a)});e.appendChild(n)}}},focusAndInputAction:function t(e,n,i,a,r,o,l,s){s.closeAllLists(null,a);if(!o){return false}currentFocus=-1;e=document.createElement("DIV");e.setAttribute("id",l.id+"autocomplete-list");e.setAttribute("class","autocomplete-items");if(r.length){e.style.border="1px solid #d4d4d4"}l.parentNode.appendChild(e);for(i=0;i<r.length;i++){n=document.createElement("DIV");if(r[i].label.substr(0,o.length).toUpperCase()==o.toUpperCase()){n.innerHTML="<strong><span style='color:red'>"+r[i].label.substr(0,o.length)+"</span></strong>"}else{n.innerHTML=r[i].label.substr(0,o.length)}n.innerHTML+=r[i].label.substr(o.length);n.innerHTML+="<input type='hidden' name='"+r[i].cityName+"' value='"+r[i].label+"'>";d(n).attr("placeid",r[i].placeId);n.addEventListener("click",function(t){t.stopPropagation();t.stopImmediatePropagation();t.preventDefault();a.value=this.getElementsByTagName("input")[0].value;a.city=this.getElementsByTagName("input")[0].name;d(a).attr("select","true");d(a).attr("city",this.getElementsByTagName("input")[0].name);d(a).attr("placeid",d(n).attr("placeid"));s.closeAllLists(null,a)});e.appendChild(n)}},portInputAction:function t(e,n,i,a,r,o,l,s){s.closeAllLists(null,a);if(!o){return false}currentFocus=-1;e=document.createElement("DIV");e.setAttribute("id",l.id+"autocomplete-list");e.setAttribute("class","autocomplete-items");if(r.length){e.style.border="1px solid #d4d4d4"}l.parentNode.appendChild(e);for(i=0;i<r.length;i++){n=document.createElement("DIV");n.innerHTML="<strong><span>"+r[i].locationPortCode+"</span></strong> ";n.innerHTML+=r[i].city;n.innerHTML+="<input type='hidden' name='"+r[i].city+"' value='"+r[i].locationPortCode+"'>";n.addEventListener("click",function(t){t.stopPropagation();t.stopImmediatePropagation();t.preventDefault();a.value=this.getElementsByTagName("input")[0].value;a.city=this.getElementsByTagName("input")[0].name;d(a).attr("select","true");d(a).attr("city",this.getElementsByTagName("input")[0].name);d(a).attr("data-name",a.value);s.closeAllLists(null,a)});e.appendChild(n)}},prot:function t(o,l){if(l.id==="destinationLocationPortCode"){return false}var s=l.id.indexOf("ori")>=0;var e=o.productObj.destination.countryArray;var n="";for(var c=0;c<e.length;c++){if(d("#destinationLocationPortCode").val().trim()==e[c].countryName){n=e[c].counrtyAbbreviate}}if(d("#"+(s?"J-origin-country-select":"J-destination-country-select")).val()*1===1){params={city:d("#originInput").val().trim()};d.ajax({url:"/queryPort",type:"get",data:{city:d(s?"#originInput":"#destinationInput").attr("city"),countryKey:s?"CN":n},xhrFields:{withCredentials:true},success:function t(e){var n=e.data;var i=document.getElementById(s?"originInputautocomplete-list-port":"destinationInputautocomplete-list-port");var a=document.createElement("DIV");a.setAttribute("id",(s?"originInput":"destinationInput")+"autocomplete-list");a.setAttribute("class","autocomplete-items");if(n.length){a.style.border="1px solid #d4d4d4"}i.appendChild(a);for(c=0;c<n.length;c++){var r=document.createElement("DIV");r.innerHTML="<strong><span>"+n[c].locationPortName+"</span></strong>";r.innerHTML+="<input  type='hidden'name='"+n[c].locationPortCode+"'id='"+n[c].city+"' value='"+n[c].locationPortName+"'>";r.addEventListener("click",function(t){t.stopPropagation();t.stopImmediatePropagation();t.preventDefault();l.value=this.getElementsByTagName("input")[0].value;l.name=this.getElementsByTagName("input")[0].name;l.datas=this.getElementsByTagName("input")[0].datas;d(s?"#originInput":"#destinationInput").attr("data-name",this.getElementsByTagName("input")[0].name);d(s?"#originInput":"#destinationInput").attr("city",this.getElementsByTagName("input")[0].id);o.closeAllLists(null,l)});a.appendChild(r)}}})}},addActive:function t(e){if(!e)return false;_that.removeActive(e);if(currentFocus>=e.length)currentFocus=0;if(currentFocus<0)currentFocus=e.length-1;e[currentFocus].classList.add("autocomplete-active")},removeActive:function t(e){for(var n=0;n<e.length;n++){e[n].classList.remove("autocomplete-active")}},closeAllLists:function t(e,n){var i=document.getElementsByClassName("autocomplete-items");for(var a=0;a<i.length;a++){if(e!=i[a]&&e!=n){i[a].parentNode.removeChild(i[a])}}},sendValidate:function t(e,n){if(d("#J-origin-country-select").val()*1==1){if(!d("#originInput").attr("city")){d("#originInput").attr("select","false")}}if(d("#J-destination-country-select").val()*1==1){if(!d("#destinationInput").attr("city")){d("#destinationInput").attr("select","false")}}var i=document.getElementById(e);var a=document.getElementById(n);var r=d("#"+e).closest(".ft-form").find(".J-country-select").val();if(i.value.length==0||d("#"+e).attr("select")=="false"){if(/[^\x00-\xff]/.test(d("#"+e).val())){a.innerHTML="Please enter in English.";a.className="error"}else{a.innerHTML=r==1?"Please enter the Port.":"Please enter the City or zip code.";a.className="error"}d("#"+e).val("");return false}else{a.innerHTML="";a.className="";return true}},initOriginCountrySelect:function t(){window.Select.use(document.getElementById("J-origin-country-select"),{tmpl:e})[0].on("change",function(t){d("#originInput").val("")})},initDestinationCountrySelect:function t(){window.Select.use(document.getElementById("J-destination-country-select"),{tmpl:e})[0].on("change",function(t){d("#destinationLocationPortCode").val("");d("#destinationInput").val("")})}};t.init()})(jQuery);
//# sourceMappingURL=../../../__sources__/athena/2017/product-calculator/calculator_3c5edb44.js.map
